> **âš ï¸ ç‰ˆæœ¬è¨»è¨˜ (Version Note)**
> - **æª”å**: `ROADMAP_v0_2.md`
> - **å…§å®¹ç‰ˆæœ¬**: v0.3 (Full Checklist View)
> - **èªªæ˜**: æ­¤æª”æ¡ˆå…§å®¹ç‚º v0.3ï¼Œä½†æ²¿ç”¨ v0_2 æª”åä»¥é¿å…æª”æ¡ˆå¢ç”Ÿã€‚å¾ŒçºŒæ›´æ–°è«‹ç›´æ¥ä¿®æ”¹æ­¤æª”ã€‚
> - **æœ€å¾Œæ›´æ–°**: 2026-01-29 (Entry [15] åŒæ­¥)

---

# ROADMAP v0.3 â€” SIP AIOS å…¨æ™¯å¯¦æ–½æ¸…å–®

* **ç‰ˆæœ¬**ï¼šv0.3 (Full Checklist View)
* **æ—¥æœŸ**ï¼š2026-01-29
* **åŸºæº–**ï¼šProject Log Entry [15] (æœ€å°é¢¨éšªä¿®è£œå®Œæˆ)
* **èªªæ˜**ï¼š
* `[x]` = å·²å®Œæˆä¸”é©—è­‰é€šé (Done & Verified)
* `[ ]` = å¾…åŸ·è¡Œ (To-Do)
* **Tracks**ï¼šåš´æ ¼å€åˆ†ç‚º **Track A (åº•å±¤æ¶æ§‹)** èˆ‡ **Track B (æ¥­å‹™æ‡‰ç”¨)**ã€‚



---

## ğŸŸ¥ Track Aï¼šSIP AIOS åº•å±¤æ¶æ§‹ (Infrastructure)

> **ç›®æ¨™**ï¼šæ‰“é€ ã€Œæ‰“ä¸æ›ã€å¯å›æ”¾ã€å¯æ¬é·ã€å¤šç§Ÿæˆ¶ã€çš„é‹è¡Œç’°å¢ƒã€‚

### Phase 0: ç’°å¢ƒèˆ‡åœ°åŸº (Foundation)

* [x] **INFRA-001: é–‹ç™¼ç’°å¢ƒæ¨™æº–åŒ–**
* *å…§å®¹*ï¼šå»ºç«‹ WSL2 + Docker Compose é‹è¡Œç’°å¢ƒ (Postgres, Nginx)ã€‚
* *é©—æ”¶*ï¼š`docker compose up` å¯å•Ÿå‹• DBï¼ŒPort 5432 å¯é€£ç·šã€‚


* [x] **INFRA-002: æ–‡ä»¶é«”ç³»ç¢ºç«‹ (The Bible)**
* *å…§å®¹*ï¼šæ’°å¯« `ARCHITECTURE.md`, `README.md`, `SIP AIOS è¨ˆç•«æ›¸ V2.1`ã€‚
* *é©—æ”¶*ï¼šæ‰€æœ‰é–‹ç™¼è¦å‰‡ã€è³‡æ–™å¤¾çµæ§‹å®šç¾©æ¸…æ™°ã€‚



### Phase 1: è³‡æ–™å®Œæ•´æ€§èˆ‡å¯æ¢å¾©æ€§ (Data Integrity)

* [x] **INFRA-003: Database Schema V1.1 (SQL)**
* *å…§å®¹*ï¼šå®šç¾©æ ¸å¿ƒ Table (`companies`, `users`, `purchase_orders`, `stock` ç­‰)ã€‚
* *é©—æ”¶*ï¼šSQL æª”æ¡ˆå¯è¢« Postgres åŸ·è¡Œç„¡å ±éŒ¯ã€‚


* [x] **INFRA-004: ä¸€éµé‚„åŸæ©Ÿåˆ¶ (Restore Baseline)** `[Critical]`
* *å…§å®¹*ï¼šè§£æ±º Circular Dependencyï¼Œä¿®å¾© `restore.sh` èˆ‡ `make reset`ã€‚
* *é©—æ”¶*ï¼š**(Entry 12 å·²é€šé)** åŸ·è¡Œ `make reset` < 5ç§’ï¼Œè³‡æ–™åº«å›åˆ°åˆå§‹ä¹¾æ·¨ç‹€æ…‹ã€‚


* [x] **INFRA-005: åŸºç¤ç¨®å­è³‡æ–™ (Seed Data)**
* *å…§å®¹*ï¼šå¯«å…¥é è¨­ Admin Userã€Tenant è³‡æ–™ã€åŸºç¤å–®ä½ (UOM)ã€‚
* *é©—æ”¶*ï¼šDB é‡ç½®å¾Œï¼Œèƒ½æŸ¥è©¢åˆ° `admin@example.com`ã€‚



### Phase 2: å¤šç§Ÿæˆ¶èˆ‡å®‰å…¨æ€§ (Multi-Tenancy & Security)

* [x] **INFRA-006: ç§Ÿæˆ¶éš”é›¢ (Tenant Isolation)**
* *å…§å®¹*ï¼šå¯¦ä½œ `sys_tenants` è¡¨ï¼Œä¸¦åœ¨æ¥­å‹™è¡¨å¼·åˆ¶åŠ ä¸Š `company_id` è¤‡åˆå¤–éµ (Composite FK)ã€‚
* *é©—æ”¶*ï¼šå˜—è©¦åœ¨ Tenant A æ’å…¥ Tenant B çš„è³‡æ–™æ™‚ï¼ŒDB å±¤ç›´æ¥å™´éŒ¯æ‹’çµ•ã€‚


* [x] **INFRA-007: æ··åˆéƒ¨ç½²æ¨¡å‹ (Hybrid Model)**
* *å…§å®¹*ï¼šçµ±ä¸€ SaaS èˆ‡ On-Prem çš„è³‡æ–™çµæ§‹ (`slug` mapping)ã€‚
* *é©—æ”¶*ï¼šåŒä¸€å¥— Schema å¯æ”¯æ´å–®æ©Ÿéƒ¨ç½²èˆ‡é›²ç«¯å¤šç§Ÿæˆ¶ã€‚


* [ ] **INFRA-008: å¯è§€æ¸¬æ€§å †ç–Š (Observability)**
* *å…§å®¹*ï¼šéƒ¨ç½² Loki (Logs) + Prometheus (Metrics)ã€‚
* *é©—æ”¶*ï¼šèƒ½çœ‹åˆ° Nginx Access Log èˆ‡ API Error Logã€‚


* [ ] **INFRA-009: é›¢ç·šé·ç§»å·¥å…· (Offline Copy)**
* *å…§å®¹*ï¼šé–‹ç™¼ `export-tenant.sh` èˆ‡ `import-tenant.sh`ã€‚
* *é©—æ”¶*ï¼šèƒ½å°‡ Tenant A æ‰“åŒ…æˆ ZIPï¼Œä¸¦åœ¨å¦ä¸€å°ä¹¾æ·¨æ©Ÿå™¨é‚„åŸã€‚


* [x] **INFRA-010: ä¾è³´é¢¨éšªæƒæèˆ‡ Gate ç­–ç•¥ (Security Audit)** `[SVC-W4-1/W4-2]`
* *å…§å®¹*ï¼šå»ºç«‹ `make audit-api` å‘½ä»¤ï¼Œç”¢å‡º JSON å ±å‘Šï¼›å®šç¾© Gate Policyï¼ˆWARN/BLOCK è¦å‰‡ï¼‰ã€‚
* *é©—æ”¶*ï¼šä¸€æ¢å‘½ä»¤ç”¢å‡º audit å ±å‘Šï¼Œrunbook èªªæ˜ç‚ºä½• High å…ˆä¸æ“‹ã€ä½•æ™‚è¦æ“‹ã€‚
* *æ–‡ä»¶*ï¼š`doc/runbooks/SVC-SECURITY-GATE-POLICY.md`


---

## ğŸŸ¦ Track Bï¼šERP æ¥­å‹™æ‡‰ç”¨ (Business & UI)

> **ç›®æ¨™**ï¼šå¯¦ç¾ã€Šç³»çµ±è¨ˆåŠƒæ›¸ V1.1ã€‹çš„å•†æ¥­é‚è¼¯ï¼Œå¾ API åˆ° UIã€‚

### Phase 1: å¾Œç«¯éª¨æ¶èˆ‡æ¬Šé™ (Backend Core)

* [x] **APP-001: API Server åˆå§‹åŒ–**
* *å…§å®¹*ï¼šå»ºç«‹ Express/NestJS å°ˆæ¡ˆçµæ§‹ï¼Œé€£æ¥ Postgresã€‚
* *é©—æ”¶*ï¼š`/health` å›å‚³ 200 OKã€‚


* [x] **APP-002: èº«åˆ†é©—è­‰ (Auth & JWT)**
* *å…§å®¹*ï¼šå¯¦ä½œç™»å…¥ (`/login`)ã€åˆ‡æ›å…¬å¸ (`/switch-company`)ã€‚
* *é©—æ”¶*ï¼š**(Entry 11 å·²é€šé)** Postman å–å¾— Tokenï¼Œä¸”è§£æ Token å…§å«æ­£ç¢º `company_id`ã€‚



### Phase 2: æ¡è³¼èˆ‡åº«å­˜é–‰ç’° (Purchase Domain)

* [x] **APP-003: æ¡è³¼æµç¨‹ API (Purchase Loop)**
* *å…§å®¹*ï¼šå¯¦ä½œ `Create PO` -> `Approve` -> `Create GRN` (æ”¶è²¨)ã€‚
* *é©—æ”¶*ï¼š**(Entry 12 å·²é€šé)** Newman è‡ªå‹•åŒ–æ¸¬è©¦ 14/14 PASSã€‚


* [x] **APP-004: åº«å­˜é€£å‹•é‚è¼¯ (Inventory Effect)**
* *å…§å®¹*ï¼šæ”¶è²¨ (GRN) è‡ªå‹•å¢åŠ  `inventory_balance` èˆ‡ `stock_movements`ã€‚
* *é©—æ”¶*ï¼šDB æŸ¥è©¢åº«å­˜è¡¨ï¼Œæ•¸é‡æº–ç¢ºå¢åŠ ã€‚


* [ ] **APP-005: æ¡è³¼å‰ç«¯ç•«é¢ (Purchase UI)**
* *å…§å®¹*ï¼š
* [ ] æ¡è³¼å–®åˆ—è¡¨èˆ‡å»ºç«‹è¡¨å–®
* [ ] æ”¶è²¨å–® (GRN) æƒç¢¼/è¼¸å…¥ä»‹é¢


* *é©—æ”¶*ï¼šä½¿ç”¨è€…èƒ½é€éç€è¦½å™¨å®Œæˆæ¡è³¼æ”¶è²¨æµç¨‹ã€‚



### Phase 3: ç”Ÿç”¢èˆ‡è£½é€ é–‰ç’° (Production Domain)

* [ ] **APP-006: ç”Ÿç”¢å·¥å–® API (MO Logic)**
* *å…§å®¹*ï¼šé–‹ç«‹å·¥å–® (MO)ï¼Œé–å®š BOM ç‰ˆæœ¬ã€‚
* *é©—æ”¶*ï¼šPostman å»ºç«‹ MO æˆåŠŸã€‚


* [ ] **APP-007: å€’æ‰£æ–™èˆ‡å ±å·¥ API (Backflush)** `[Hard]`
* *å…§å®¹*ï¼šç”Ÿç”¢å®Œå·¥ç”³å ± -> è‡ªå‹•æ‰£æ¸›åŸæ–™åº«å­˜ (FIFO) -> å¢åŠ æˆå“åº«å­˜ã€‚
* *é©—æ”¶*ï¼š**é—œéµï¼** åŸæ–™åº«å­˜æ¸›å°‘ï¼Œæˆå“åº«å­˜å¢åŠ ï¼Œä¸” Lot (æ‰¹è™Ÿ) è¿½æº¯éˆè·¯å®Œæ•´ã€‚


* [ ] **APP-008: ç”Ÿç”¢å‰ç«¯ç•«é¢ (Production UI)**
* *å…§å®¹*ï¼š
* [ ] ç¾å ´å ±å·¥ä»‹é¢ (Mobile/Pad é©é…)
* [ ] å·¥å–®ç®¡ç†å¾Œå°


* *é©—æ”¶*ï¼šä½œæ¥­å“¡èƒ½ç”¨æ¨¡æ“¬æ‰‹æ©Ÿç•«é¢é»æ“Šã€Œé–‹å§‹ç”Ÿç”¢ã€èˆ‡ã€Œå®Œå·¥ã€ã€‚



### Phase 4: å¹³å°åŸºç¤ UI (Platform UI)

* [ ] **APP-009: å‰ç«¯å°ˆæ¡ˆæ¶æ§‹**
* *å…§å®¹*ï¼šReact/Next.js åˆå§‹åŒ–ï¼Œæ•´åˆ Tailwind/AntD/MUIã€‚
* *é©—æ”¶*ï¼šé¦–é å¯è¦‹ã€‚


* [ ] **APP-010: ç™»å…¥èˆ‡å°èˆª (Shell)**
* *å…§å®¹*ï¼šç™»å…¥é é¢ã€å´é‚Šæ¬„ (Sidebar)ã€éºµåŒ…å±‘ (Breadcrumbs)ã€‚
* *é©—æ”¶*ï¼šç™»å…¥å¾Œè·³è½‰è‡³ Dashboardï¼ŒToken å„²å­˜æ–¼ LocalStorage/Cookieã€‚



---

## ğŸ¯ ç•¶å‰åŸ·è¡Œç„¦é» (Current Focus)

æ ¹æ“š Entry [15] çš„é€²åº¦ï¼Œæˆ‘å€‘å®Œæˆäº†æœ€å°é¢¨éšªä¿®è£œ (SVC-W4-3)ã€‚
ç¾åœ¨çš„**æˆ°ç•¥æ±ºç­–**æ˜¯ï¼š

1. **å„ªå…ˆç´š P1**ï¼š**APP-006 & APP-007 (ç”Ÿç”¢ API)**ã€‚
   * *åŸå› *ï¼šç”Ÿç”¢é‚è¼¯æœ€è¤‡é›œï¼Œé¢¨éšªæœ€é«˜ï¼Œå…ˆå¯« API ç¢ºä¿é‚è¼¯æ­£ç¢ºã€‚

2. **å„ªå…ˆç´š P2**ï¼š**APP-009 & APP-010 (å‰ç«¯å•Ÿå‹•)**ã€‚
   * *åŸå› *ï¼šæœ‰äº† API å»æ²’ç•«é¢ï¼Œç„¡æ³•çµ¦éæŠ€è¡“äººå“¡ Demoã€‚

3. **æ²»ç†å®Œæˆ (Entry [15])**ï¼š
   * âœ… Gate å¯æ”œæ€§ï¼š`newman` å·²ç´å…¥å°ˆæ¡ˆä¾è³´ï¼Œ`make gate-app-02` ä¸å†ä¾è³´å…¨åŸŸå®‰è£ã€‚
   * âœ… Security Gateï¼š`make audit-api` ç”¢å‡º JSON å ±å‘Šï¼ŒGate Policy runbook å·²å»ºç«‹ã€‚
   * âœ… æœ€å°é¢¨éšªä¿®è£œï¼š`bcrypt` å‡ç´š 5.1.1â†’6.0.0ï¼Œæ¼æ´ 12â†’10ï¼ˆå‰©é¤˜ waiver å·²åˆ†é¡ï¼‰ã€‚

**çµ¦ Agent çš„ä¸‹ä¸€æ¢æŒ‡ä»¤å»ºè­°ï¼š**

> "Execute **SVC-APP-006**: Implement Manufacturing Order API. Focus on BOM version locking and MO creation logic first."

