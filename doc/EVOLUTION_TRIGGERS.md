# EVOLUTION_TRIGGERS（演進與觸發條件清單）

- 文件等級：管理標準（避免過度設計，也避免太晚才補洞）
- 目的：把「什麼時候要升級架構」講清楚，避免討論變玄學
- 適用：On-Prem Appliance（每客戶獨立 Stack）

---

## 0. 原則
- 先定義觸發條件，再談導入新技術
- 沒有量測，就沒有演進（Observability 先於擴展）

---

## 1. 部署與交付演進
- 當客戶安裝失敗率上升（或安裝時間過長）：
  - 觸發：安裝/更新工單在短期內明顯增加
  - 對策：強化 INSTALL 自檢、前置環境檢測、錯誤提示與回滾
- 當客戶要求離線更新比例上升：
  - 觸發：無法連 Registry 或政策限制
  - 對策：Offline Bundle 流程標準化（含完整性驗證）

---

## 2. 資料與容量演進
- 磁碟使用率長期偏高
  - 觸發：常態 > 80% 或反覆逼近 90%
  - 對策：先調整 Retention / Tiering，再談換硬碟或上雲
- 報表與匯出造成尖峰
  - 觸發：匯出檔累積或 I/O 峰值影響線上操作
  - 對策：匯出改非同步、增加清理、限制頻率

---

## 3. 即時與訊息中介（MES 看板）
- 需要更低延遲、更高頻更新
  - 觸發：看板延遲成為業務痛點，且已做過聚合/降頻仍不足
  - 對策：明確選型（例如內網推播機制），並把上限與降級寫入 RUNBOOK
- 設備/PLC 來源暴增
  - 觸發：採集來源數量與頻率大幅提高
  - 對策：強制在 Edge/Server 端做聚合與 COV，禁止直接把原始高頻灌進 DB

---

## 4. 遠端支援演進
- 診斷包過大或生成太慢
  - 觸發：診斷包無法在合理時間完成或傳輸
  - 對策：動態採樣、區段匯出、分層收集（DIAGNOSTICS_BUNDLE）

---

## 5. 艦隊管理（Fleet Management）
- 客戶數與版本分歧變大
  - 觸發：多客戶版本不一致造成支援成本爆炸
  - 對策：Phase 3 建立中央 Dashboard（客戶端主動回報，需授權）

---

## 6. 驗收標準（DoD）
- 每一項觸發條件都有：
  - 可量測指標（Metric）
  - 對應處置文件（RUNBOOK / POLICY）
  - 明確的「不做」與「何時再談」
